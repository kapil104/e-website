{% extends 'Index.html' %}
{% load static %}


{% block Header %} 
<header>
    <!-- Header desktop -->
    <div class="container-menu-desktop">
        <!-- Topbar -->
        
        <div class="wrap-menu-desktop">
            <nav class="limiter-menu-desktop container">

                <!-- Logo desktop -->
                <a href="#" class="logo">
                    <img src="{% static 'images/icons/logo-01.png' %}" alt="IMG-LOGO">
                </a>

                <!-- Menu desktop -->
                <div class="menu-desktop">
                    <ul class="main-menu">
                        <li >
                            <a href="{{C_URL}}customerapp/">CustomerHome</a>
                        </li>
                        <li>
                            <a href="{{C_URL}}customerapp/changepassword">Change Password</a>
                        </li>
                        <li class="active-menu">
                            <a href="{{C_URL}}customerapp/addtocart">Add To Cart</a>
                        </li>
                        <li>
                            <a href="{{C_URL}}customerapp/editprofile">Edit Profile</a>
                        </li>
                        <li>
                            <a href="{{C_URL}}customerapp/viewprofile">View Profile</a>
                        </li>
                        
                        <li>
                            <a href="{{C_URL}}customerapp/logout/">Logout</a>
                        </li>
                    </ul>
                </div>
        </nav>
        </div>
    </div>

    <!-- Header Mobile -->
    <div class="wrap-header-mobile">
        <!-- Logo moblie -->
        <div class="logo-mobile">
            
                <div class="menu-desktop">
                    <ul class="main-menu">
                        <li class="active-menu">
                            <a href="{{C_URL}}">CustomerHome</a>
                        </li>
                        <li>
                            <a href="{{C_URL}}customerapp/changepassword">Change Password</a>
                        </li>
                        <li>
                            <a href="{{C_URL}}customerapp/editprofile">Edit Profile</a>
                        </li>
                        <li>
                            <a href="{{C_URL}}login/">Logout</a>
                        </li>
                    </ul>
                </div>    
        </div>

        
        <!-- Button show menu -->
        <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
            <span class="hamburger-box">
                <span class="hamburger-inner"></span>
            </span>
        </div>
    </div>

    
</header>
{% endblock Header %} 

{% block Slider %}
{% endblock Slider %} 

{% block Banner %} 
{% endblock Banner %} 

{% block Products %} 

{% if cartdetails %}
<div class="container" style="margin-top:80px;">
    <div class="row">
        <div class="col-lg-10 col-xl-12 m-lr-auto m-b-50">
            <table class="table-shopping-cart">
                <tr class="table_head">
                    <th class="column-1">S.No</th>
                    <th class="column-1">Image</th>
                    <th class="column-1">Product</th>
                    <th class="column-1">Price</th>
                    <th class="column-1">Quantity</th>
                    <th class="column-1">Total</th>
                </tr>
                    {% for dic in cartdetails %}
                    <tr class="table_row">
                        <td class="column-1">{{forloop.counter}}</td>
                        <td class="column-1">
                                <div class="how-itemcart1">
                                    <img src="{{ dic.product_img.product_img.url }}" alt="IMG">
                                </div>
                        </td>
                        <td class="column-1">{{dic.product_brand}}<br>
                                {{dic.product_description}}</td>
                        <td class="column-1">&#8377;{{dic.product_price}}</td>
                        <td class="column-1">
                            {% comment %} {{dic.product_quantity}} {% endcomment %}
                            <div class="wrap-num-product flex-w m-r-20 m-tb-10">
                                        {% comment %} <div class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m"
                                        id="sub"
                                        onclick="funsub()"
                                        >
                                            <i class="fs-16 zmdi zmdi-minus"></i>
                                        </div> {% endcomment %}

                    <button class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">
                    <a href="{{C_URL}}customerapp/addtocart/decrement?quantity={{dic.product_quantity}}&cart_id={{dic.cart_id}}" style="text-decoration:none;"
                    
                    >

                    <i class="fs-16 zmdi zmdi-minus"></i>
                    </a>
                    </button>
    
                    <input class="mtext-104 cl3 txt-center num-product" type="number"  
                    name="getquantity"
                    id="quantity_input"  
                    disabled
                    value={{dic.product_quantity}} 
                    >
                   
                    <button class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">
                        <a href="{{C_URL}}customerapp/addtocart/increment?quantity={{dic.product_quantity}}&cart_id={{dic.cart_id}}" style="text-decoration:none;">
                            <i class="fs-16 zmdi zmdi-plus"></i>
                        </a>
                        </button>
                </div>
                        </td>
                        <td class="column-1" id='total'>&#8377;
                            {{dic.product_total_price}}
                            {% comment %} <script>
                                var count = {{dic.product_quantity}} //4
                                var p_price = {{dic.product_price}}
                                var sum1 = {{sum}}

                                function funsub() {
                                    if (count > 1) {
                                        count -= 1; //3 
                                        sum1-=p_price;
                                       document.getElementById("quantity_input").value = count;
                                       document.getElementById("total").innerHTML = "&#8377;"+ (count*p_price).toFixed(2);
                                       console.log("dec:",count*p_price)
                                       document.getElementById("grandtotal").innerHTML = "Total Price: &#8377;"+ sum1.toFixed(2);
                                    }
                                }
                            
                                function funadd() {
                                    count += 1;    
                                    sum1+=p_price;
                                    document.getElementById("quantity_input").value = count;
                                    document.getElementById("total").innerHTML = "&#8377;"+  (count*p_price).toFixed(2);
                                    console.log("incre:",count*p_price)
                                    document.getElementById("grandtotal").innerHTML = "Total Price: &#8377;"+ sum1.toFixed(2);
                                }
                            </script>     {% endcomment %}
                        </td>
                        <td class="column-1">
                            <button class="flex-c-m stext-101 cl0 size-125 bg10 bor2 p-lr-15 trans-04">
                                <a href="{% url 'deleteproduct' %}?id={{ dic.cart_id  }}"style="color:white;text-decoration:none;">
                                    DELETE
                                </a>
                                </button>  
                               
                        </tr>
                        {% endfor %}
                </table>
                <div class="flex-w flex-sb-m bor15 p-t-18 p-b-15 p-lr-40 p-lr-15-sm">
                    <div class="flex-c-m stext-101 size-119 bg8  p-lr-15 m-tb-10" >
                       <span id='grandtotal'> Total Price: &#8377;{{sum}} </span>
                    </div>
                    
                    <button class="flex-c-m stext-101 cl0 size-125 bg3 bor2 hov-btn3 p-lr-15 trans-04">
                        <a href="{{C_URL}}customerapp/payment?price={{sum}}" style="color:white;text-decoration:none;">
                            PlaceOrder
                        </a>
                        </button>
                
                </div> 
            
        </div>

        {% comment %} <div class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
            <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                <h4 class="mtext-109 cl2 p-b-30">
                    Cart Totals
                </h4>

                <div class="flex-w flex-t bor12 p-b-13">
                    <div class="size-208">
                        <span class="stext-110 cl2">
                            Subtotal:
                        </span>
                    </div>

                    <div class="size-209">
                        <span class="mtext-110 cl2">
                            $79.65
                        </span>
                    </div>
                </div>

                <div class="flex-w flex-t bor12 p-t-15 p-b-30">
                    <div class="size-208 w-full-ssm">
                        <span class="stext-110 cl2">
                            Shipping:
                        </span>
                    </div>

                    <div class="size-209 p-r-18 p-r-0-sm w-full-ssm">
                        <p class="stext-111 cl6 p-t-2">
                            There are no shipping methods available. Please double check your address, or contact us if you need any help.
                        </p>
                        
                        <div class="p-t-15">
                            <span class="stext-112 cl8">
                                Calculate Shipping
                            </span>

                            <div class="rs1-select2 rs2-select2 bor8 bg0 m-b-12 m-t-9">
                                <select class="js-select2" name="time">
                                    <option>Select a country...</option>
                                    <option>USA</option>
                                    <option>UK</option>
                                </select>
                                <div class="dropDownSelect2"></div>
                            </div>

                            <div class="bor8 bg0 m-b-12">
                                <input class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="state" placeholder="State /  country">
                            </div>

                            <div class="bor8 bg0 m-b-22">
                                <input class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="postcode" placeholder="Postcode / Zip">
                            </div>
                            
                            <div class="flex-w">
                                <div class="flex-c-m stext-101 cl2 size-115 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer">
                                    Update Totals
                                </div>
                            </div>
                                
                        </div>
                    </div>
                </div>

                <div class="flex-w flex-t p-t-27 p-b-33">
                    <div class="size-208">
                        <span class="mtext-101 cl2">
                            Total:
                        </span>
                    </div>

                    <div class="size-209 p-t-1">
                        <span class="mtext-110 cl2">
                            $79.65
                        </span>
                    </div>
                </div>

                <button class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
                    Proceed to Checkout
                </button>
            </div>
        </div> {% endcomment %}
    </div>
</div>
{% else %}
<div style="margin-top:80px;text-align:center">
    <image src='https://bakestudio.in/assets/images/cart/empty-cart.gif' />
    <h1 style="margin-top:60px;text-align:center;">Your cart is empty</h1>
    <button class="flex-c-m stext-101 cl0 size-125 bg3 bor2 p-lr-15 trans-04" style="margin:auto;">
    <a href="{{C_URL}}customerapp/" 
    class="cl0" 
    style="text-decoration:none;"
    >          
            Shop Now
        </a>
    </button>
    {% endif %}

{% endblock Products %}


{% block Footer %} 
{% endblock Footer %} 